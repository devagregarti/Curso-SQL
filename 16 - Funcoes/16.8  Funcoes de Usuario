üéØ T√≥pico: Fun√ß√µes de Usu√°rio em SQL
1. O que s√£o fun√ß√µes de usu√°rio?
S√£o fun√ß√µes criadas pelo pr√≥prio usu√°rio para realizar opera√ß√µes espec√≠ficas que n√£o existem nas fun√ß√µes padr√£o do SQL.

Podem facilitar tarefas repetitivas, simplificar consultas complexas e organizar l√≥gica de neg√≥cio.

2. Por que usar fun√ß√µes de usu√°rio?
Reutilizar c√≥digo em v√°rias consultas.

Encapsular l√≥gica complexa.

Tornar consultas mais leg√≠veis e organizadas.

3. Tipos comuns de fun√ß√µes de usu√°rio:
Tipo	O que fazem	Exemplo pr√°tico
Fun√ß√£o Escalar	Retorna um √∫nico valor	Converter uma data em formato diferente
Fun√ß√£o de Tabela	Retorna uma tabela (conjunto de linhas)	Filtrar registros complexos e retornar v√°rios resultados

4. Exemplo simples ‚Äî Criar uma fun√ß√£o para formatar telefone:
Imagine que voc√™ quer padronizar o formato de telefone (ex: s√≥ n√∫meros, ou com par√™nteses):

sql
Copy
Edit
CREATE FUNCTION formatar_telefone(telefone TEXT)
RETURNS TEXT AS $$
BEGIN
  -- Remove tudo que n√£o for n√∫mero
  RETURN regexp_replace(telefone, '[^0-9]', '', 'g');
END;
$$ LANGUAGE plpgsql;
Uso na consulta:

sql
Copy
Edit
SELECT nome, formatar_telefone(telefone) AS telefone_formatado
FROM clientes;
5. Exemplo pr√°tico ‚Äî Fun√ß√£o para calcular desconto:
sql
Copy
Edit
CREATE FUNCTION calcula_desconto(preco NUMERIC, desconto_pct NUMERIC)
RETURNS NUMERIC AS $$
BEGIN
  RETURN preco - (preco * desconto_pct / 100);
END;
$$ LANGUAGE plpgsql;
Uso:

sql
Copy
Edit
SELECT produto, preco, calcula_desconto(preco, 10) AS preco_com_desconto
FROM produtos;
6. Boas pr√°ticas para fun√ß√µes de usu√°rio:
Mantenha a fun√ß√£o simples e focada em uma tarefa.

Documente o que ela faz e os par√¢metros que recebe.

Teste com diferentes entradas para garantir que funciona bem.

Use fun√ß√µes para evitar repeti√ß√£o de c√≥digo e facilitar manuten√ß√£o.

Resumo para v√≠deo:
Explique o conceito e utilidade das fun√ß√µes de usu√°rio.

Mostre exemplos pr√°ticos simples, como formatar telefone e calcular desconto.

Enfatize como elas ajudam a organizar e simplificar consultas do dia a dia.