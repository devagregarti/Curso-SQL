üöÄ Introdu√ß√£o a CTEs e Queries Recursivas em SQL
O que √© uma CTE (Common Table Expression)?
CTE √© uma forma de criar uma tabela tempor√°ria dentro de uma consulta SQL.

Serve para organizar queries complexas, deixar o c√≥digo mais leg√≠vel e reutilizar resultados intermedi√°rios.

Funciona como um ‚Äúsubselect‚Äù nomeado que voc√™ pode usar depois dentro da mesma query.

Sintaxe b√°sica de uma CTE
sql
Copiar
Editar
WITH nome_da_cte AS (
  -- consulta SQL aqui
  SELECT coluna1, coluna2 FROM tabela WHERE condi√ß√£o
)
SELECT * FROM nome_da_cte WHERE outra_condi√ß√£o;
Por que usar CTE?
Facilita a leitura e manuten√ß√£o do c√≥digo.

Ajuda a dividir problemas complexos em partes menores.

Pode melhorar a performance em alguns casos, evitando repeti√ß√µes.

O que √© uma query recursiva?
√â um tipo especial de CTE que se chama repetidamente at√© que uma condi√ß√£o pare a recurs√£o.

Muito √∫til para trabalhar com dados hier√°rquicos, como estruturas de √°rvore, organogramas, categorias aninhadas, etc.

Estrutura b√°sica de uma query recursiva
sql
Copiar
Editar
WITH RECURSIVE nome_da_cte AS (
  -- Parte n√£o recursiva (caso base)
  SELECT ... FROM tabela WHERE condi√ß√£o_inicial

  UNION ALL

  -- Parte recursiva (se chama usando os resultados anteriores)
  SELECT ... FROM tabela JOIN nome_da_cte ON condi√ß√£o_de_recurs√£o
)
SELECT * FROM nome_da_cte;
Exemplo pr√°tico de uso
Listar todos os funcion√°rios e seus subordinados em uma hierarquia de empresa.

Montar um caminho em uma √°rvore geneal√≥gica.

