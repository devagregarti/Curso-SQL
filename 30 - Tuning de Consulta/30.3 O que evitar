ğŸš« 3. Evite funÃ§Ãµes nas colunas filtradas
âŒ Ineficiente:
sql
Copy
Edit
SELECT * FROM vendas WHERE DATE(data_venda) = '2024-01-01';
Isso impede o uso de Ã­ndice.

âœ… Melhor:
sql
Copy
Edit
SELECT * FROM vendas WHERE data_venda BETWEEN '2024-01-01' AND '2024-01-01 23:59:59';
ğŸ” 4. Substitua subqueries por JOIN quando possÃ­vel
âŒ Subquery lenta:
sql
Copy
Edit
SELECT nome FROM clientes
WHERE id IN (SELECT cliente_id FROM pedidos WHERE total > 100);
âœ… Com JOIN:
sql
Copy
Edit
SELECT DISTINCT c.nome
FROM clientes c
JOIN pedidos p ON p.cliente_id = c.id
WHERE p.total > 100;
ğŸ§® 5. Use LIMIT e OFFSET com cautela
OFFSET grande pode deixar a consulta lenta.

âŒ Lento com muitos dados:
sql
Copy
Edit
SELECT * FROM produtos OFFSET 100000 LIMIT 10;
âœ… Alternativa:
Paginar com base em valores de chave primÃ¡ria:

sql
Copy
Edit
SELECT * FROM produtos WHERE id > 100000 LIMIT 10;
ğŸ“Š 6. Prefira EXISTS a IN em muitos casos
âœ… Melhor desempenho com muitos valores:
sql
Copy
Edit
SELECT nome FROM clientes c
WHERE EXISTS (
  SELECT 1 FROM pedidos p WHERE p.cliente_id = c.id
);
ğŸ“¦ 7. Reduza o uso de DISTINCT e GROUP BY desnecessÃ¡rios
Eles forÃ§am ordenaÃ§Ãµes e agregaÃ§Ãµes desnecessÃ¡rias.

âš¡ 8. Trabalhe com colunas especÃ­ficas
Evite SELECT *:

sql
Copy
Edit
SELECT nome, email FROM clientes;
ğŸ§  9. Materialize subconsultas complexas com WITH (CTEs)
Quando uma subconsulta Ã© usada vÃ¡rias vezes:

sql
Copy
Edit
WITH top_vendas AS (
  SELECT cliente_id, SUM(valor) AS total
  FROM vendas
  GROUP BY cliente_id
)
SELECT * FROM top_vendas WHERE total > 1000;
Pode ajudar na legibilidade e desempenho.

ğŸ”’ 10. Cuidado com joins cruzados (CROSS JOIN)
Eles criam o produto cartesiano (multiplicam os registros).

ğŸ§¹ 11. Atualize estatÃ­sticas com ANALYZE
Ajuda o otimizador a tomar melhores decisÃµes:

sql
Copy
Edit
ANALYZE;
ğŸ” 12. Use PARALLEL quando possÃ­vel
O PostgreSQL executa algumas operaÃ§Ãµes em paralelo, especialmente em agregaÃ§Ãµes e scans de tabelas grandes. Veja no plano de execuÃ§Ã£o se aparece Parallel Seq Scan.

ğŸ“ˆ 13. Acompanhe queries com pg_stat_statements
ExtensÃ£o que mostra:

Queries mais executadas

Tempo mÃ©dio de execuÃ§Ã£o

FrequÃªncia de chamadas

