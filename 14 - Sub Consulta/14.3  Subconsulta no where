ğŸ¯ TÃ³pico 3: Subconsulta dentro do WHERE â€“ Filtrando com consulta dentro da condiÃ§Ã£o
âœ… Objetivo:
Mostrar como usar subconsultas dentro da clÃ¡usula WHERE para filtrar resultados com base em dados de outras tabelas ou consultas.

ğŸ§© 1. O que Ã©?
ğŸ“Œ Uma subconsulta no WHERE retorna um valor ou conjunto de valores usados para filtrar as linhas da consulta principal.

ğŸ” 2. Exemplo prÃ¡tico 1: Subconsulta retornando valor Ãºnico
Listar clientes que tÃªm pedidos com valor maior que a mÃ©dia de todos os pedidos.

sql
Copy
Edit
SELECT nome
FROM clientes
WHERE id IN (
  SELECT cliente_id
  FROM pedidos
  WHERE valor > (
    SELECT AVG(valor) FROM pedidos
  )
);
Aqui, a subconsulta mais interna calcula a mÃ©dia dos valores de pedidos. A subconsulta do meio busca os clientes com pedidos acima dessa mÃ©dia, e a consulta principal mostra o nome desses clientes.

ğŸ” 3. Exemplo prÃ¡tico 2: Subconsulta com operador EXISTS
Listar clientes que tÃªm pelo menos um pedido.

sql
Copy
Edit
SELECT nome
FROM clientes c
WHERE EXISTS (
  SELECT 1 FROM pedidos p WHERE p.cliente_id = c.id
);
O EXISTS verifica se existe pelo menos uma linha em pedidos relacionada ao cliente.

ğŸ“ 4. Dica para slide/roteiro:
â€œSubconsultas no WHERE sÃ£o poderosas para filtros dinÃ¢micos, usando dados de outras tabelas ou agregaÃ§Ãµes, tornando as consultas mais inteligentes e flexÃ­veis.â€

