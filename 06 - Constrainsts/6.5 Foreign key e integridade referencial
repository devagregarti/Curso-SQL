üîó FOREIGN KEY e Integridade Referencial em SQL
O que √© uma FOREIGN KEY?
√â uma constraint (restri√ß√£o) que conecta duas tabelas no banco de dados.

Uma FOREIGN KEY em uma tabela aponta para uma PRIMARY KEY (ou UNIQUE) em outra tabela.

Serve para garantir que o valor na tabela filha existe na tabela pai.

O que √© Integridade Referencial?
√â a propriedade que mant√©m a consist√™ncia entre as tabelas relacionadas.

Garante que n√£o existam refer√™ncias inv√°lidas ‚Äî ou seja, um valor em uma tabela filha sempre deve existir na tabela pai.

Evita dados ‚Äú√≥rf√£os‚Äù que n√£o fazem sentido para a aplica√ß√£o.

Exemplo Pr√°tico
sql
Copy
Edit
CREATE TABLE clientes (
    id SERIAL PRIMARY KEY,
    nome TEXT NOT NULL
);

CREATE TABLE pedidos (
    id SERIAL PRIMARY KEY,
    cliente_id INT,
    data_pedido DATE DEFAULT CURRENT_DATE,
    CONSTRAINT fk_cliente FOREIGN KEY (cliente_id) REFERENCES clientes(id)
);
Aqui:

pedidos.cliente_id √© uma FOREIGN KEY que referencia clientes.id.

Voc√™ n√£o pode inserir um pedido com cliente_id que n√£o exista na tabela clientes.

Se tentar, o banco rejeita a opera√ß√£o, garantindo integridade.

Comportamentos Comuns das FOREIGN KEYS
Voc√™ pode definir a√ß√µes para quando a tabela pai sofre mudan√ßas:

A√ß√£o no Pai	Op√ß√£o SQL	O que acontece na filha?
Deletar registro	ON DELETE CASCADE	Deleta os registros filhos automaticamente.
Deletar registro	ON DELETE SET NULL	Seta o valor da FK para NULL na tabela filha.
Deletar registro	ON DELETE RESTRICT	Impede a exclus√£o se existirem filhos.
Atualizar valor PK	ON UPDATE CASCADE	Atualiza os valores da FK na tabela filha.

Por que usar FOREIGN KEYS?
Seguran√ßa: O banco impede inser√ß√µes inv√°lidas.

Consist√™ncia: Mant√©m a l√≥gica do modelo relacional.

Automa√ß√£o: A√ß√µes em cascata evitam inconsist√™ncias manuais.

Facilidade na manuten√ß√£o: Ajuda a entender rela√ß√µes entre dados.

Boas pr√°ticas
Sempre crie √≠ndices nas colunas de FOREIGN KEY para melhorar desempenho.

Defina nomes claros para as constraints, como fk_pedidos_clientes.

Use a√ß√µes em cascata com cuidado, entendendo o impacto no banco.

