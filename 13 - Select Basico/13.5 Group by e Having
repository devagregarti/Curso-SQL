ğŸ¯ TÃ³pico 4: GROUP BY e HAVING â€“ Quando os dados precisam ser agrupados
âœ… Objetivo:
Ensinar como agrupar registros por categoria com GROUP BY e filtrar grupos com HAVING, com exemplos cotidianos como "quantos clientes por cidade" ou "qual cidade mais comprou".

ğŸ§© 1. O que Ã© GROUP BY?
ğŸ“Œ DefiniÃ§Ã£o curta:

Agrupa os dados por uma ou mais colunas para aplicar funÃ§Ãµes de agregaÃ§Ã£o em cada grupo.

ğŸ“Š 2. Exemplo direto do dia a dia:
Exemplo 1: Contar clientes por cidade
sql
Copy
Edit
SELECT cidade, COUNT(*) AS total_clientes
FROM clientes
GROUP BY cidade;
ğŸ—£ï¸ O que faz?

Agrupa os clientes por cidade e mostra quantos clientes existem em cada cidade.

Exemplo 2: Total vendido por forma de pagamento
sql
Copy
Edit
SELECT forma_pagamento, SUM(valor_compra) AS total_vendas
FROM pedidos
GROUP BY forma_pagamento;
ğŸ—£ï¸ O que faz?

Mostra quanto foi vendido em cada forma de pagamento (cartÃ£o, Pix, dinheiro...).

ğŸ§± 3. O que Ã© HAVING?
ğŸ“Œ DefiniÃ§Ã£o curta:

Serve para filtrar os grupos, depois do GROUP BY.

ğŸ” ComparaÃ§Ã£o:

WHERE â†’ filtra linhas antes do agrupamento.

HAVING â†’ filtra grupos depois do GROUP BY.

Exemplo prÃ¡tico com HAVING:
Mostrar somente as cidades com mais de 3 clientes:

sql
Copy
Edit
SELECT cidade, COUNT(*) AS total_clientes
FROM clientes
GROUP BY cidade
HAVING COUNT(*) > 3;
Outro exemplo com SUM:
Mostrar formas de pagamento com vendas acima de R$ 1.000:

sql
Copy
Edit
SELECT forma_pagamento, SUM(valor_compra) AS total
FROM pedidos
GROUP BY forma_pagamento
HAVING SUM(valor_compra) > 1000;
ğŸ§  Dicas rÃ¡pidas:
Sempre use GROUP BY com uma funÃ§Ã£o de agregaÃ§Ã£o (COUNT, SUM, AVG, etc.).

Use HAVING apenas quando quiser filtrar os resultados agrupados.

NÃ£o confundir com WHERE, que filtra antes do agrupamento.

ğŸ“ ConclusÃ£o para o Slide/Roteiro:
â€œCom GROUP BY, vocÃª organiza os dados em categorias, como por cidade, produto ou forma de pagamento. E com HAVING, vocÃª consegue filtrar esses grupos com base nos totais, mÃ©dias e contagens. Ã‰ assim que o SQL comeÃ§a a parecer mÃ¡gica!â€