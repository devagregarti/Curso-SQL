ğŸ¯ TÃ³pico 12: CTE (Common Table Expression) â€“ Consultas temporÃ¡rias para organizar seu SQL
âœ… Objetivo:
Apresentar o conceito de CTE para criar consultas temporÃ¡rias e melhorar a organizaÃ§Ã£o e legibilidade dos seus SELECTs.

ğŸ§© 1. O que Ã© CTE?
ğŸ“Œ Uma consulta temporÃ¡ria nomeada, que vocÃª define antes do SELECT principal e pode reutilizar dentro daquela consulta.

ğŸ” 2. Sintaxe bÃ¡sica:
sql
Copy
Edit
WITH clientes_adultos AS (
  SELECT * FROM clientes WHERE idade >= 18
)
SELECT nome, idade FROM clientes_adultos WHERE cidade = 'Dublin';
Aqui criamos a CTE clientes_adultos e depois usamos ela na consulta principal.

ğŸ” 3. Exemplo prÃ¡tico 1: Listar clientes adultos de uma cidade especÃ­fica
sql
Copy
Edit
WITH clientes_adultos AS (
  SELECT * FROM clientes WHERE idade >= 18
)
SELECT nome, cidade FROM clientes_adultos WHERE cidade = 'Lisboa';
ğŸ” 4. Exemplo prÃ¡tico 2: CTE com agregaÃ§Ã£o para calcular mÃ©dia de idade por cidade
sql
Copy
Edit
WITH media_idade AS (
  SELECT cidade, AVG(idade) AS idade_media
  FROM clientes
  GROUP BY cidade
)
SELECT * FROM media_idade WHERE idade_media > 30;
ğŸ“ 5. Dica para slide/roteiro:
â€œCTE ajuda a quebrar consultas em partes fÃ¡ceis de entender, fazendo seu SQL mais limpo e fÃ¡cil de manter â€” muito Ãºtil para consultas do dia a dia e projetos maiores.â€

