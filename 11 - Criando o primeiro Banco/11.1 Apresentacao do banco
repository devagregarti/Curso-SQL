
üéØ Cen√°rio do Banco: Sistema de Vendas em uma Loja
Entidades:
    Clientes
    Produtos
    Pedidos

Itens do Pedido (tabela associativa)

Departamentos (subentendido pelos produtos)

üõ†Ô∏è Scripts e Explica√ß√µes

-- Tabela de Clientes
CREATE TABLE clientes (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    telefone VARCHAR(20),
    data_cadastro DATE DEFAULT CURRENT_DATE,
    ativo BOOLEAN DEFAULT TRUE
);
üìù Explica√ß√£o:
SERIAL: cria um n√∫mero autom√°tico para o ID.

NOT NULL: exige que o campo seja preenchido.

UNIQUE: impede duplica√ß√£o de e-mails.

DEFAULT: define valor padr√£o.

BOOLEAN: mostra uso pr√°tico (cliente ativo ou n√£o).

-- Tabela de Departamentos
CREATE TABLE departamentos (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(50) NOT NULL UNIQUE
);
üìù Explica√ß√£o:
Cria categorias para produtos (ex: Eletr√¥nicos, Roupas).

Campo nome √© √∫nico para evitar repeti√ß√£o.

-- Tabela de Produtos
CREATE TABLE produtos (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    preco NUMERIC(10, 2) CHECK (preco >= 0),
    estoque INT DEFAULT 0 CHECK (estoque >= 0),
    id_departamento INT REFERENCES departamentos(id)
);
üìù Explica√ß√£o:
CHECK: impede valores negativos.

REFERENCES: chave estrangeira ligando ao departamento.

Exemplo de uso de tipo num√©rico e integridade referencial.

-- Tabela de Pedidos
CREATE TABLE pedidos (
    id SERIAL PRIMARY KEY,
    id_cliente INT NOT NULL REFERENCES clientes(id),
    data_pedido TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status VARCHAR(20) DEFAULT 'pendente' CHECK (status IN ('pendente', 'pago', 'cancelado'))
);
üìù Explica√ß√£o:
Usa tipo TIMESTAMP e CHECK para controle de status.

REFERENCES garante que s√≥ se cria pedido para cliente existente.

-- Tabela de Itens do Pedido (associativa)
CREATE TABLE itens_pedido (
    id SERIAL PRIMARY KEY,
    id_pedido INT NOT NULL REFERENCES pedidos(id) ON DELETE CASCADE,
    id_produto INT NOT NULL REFERENCES produtos(id),
    quantidade INT NOT NULL CHECK (quantidade > 0),
    preco_unitario NUMERIC(10,2) NOT NULL CHECK (preco_unitario >= 0)
);
üìù Explica√ß√£o:
Tabela que liga produtos aos pedidos.

ON DELETE CASCADE: se o pedido for apagado, os itens tamb√©m.

Garante integridade e rastreabilidade da venda no momento do pedido.

üìå Conceitos Utilizados:
Conceito	Aplica√ß√£o
Chave prim√°ria	id em todas as tabelas
Chave estrangeira	id_cliente, id_departamento, id_pedido, id_produto
Tipos de dados	VARCHAR, BOOLEAN, NUMERIC, DATE, TIMESTAMP, INT
Constraints	NOT NULL, UNIQUE, DEFAULT, CHECK, REFERENCES, ON DELETE CASCADE
Normaliza√ß√£o at√© 3FN	Nenhum campo depende indiretamente da chave e tudo est√° separado corretamente
Relacionamentos	1:N (clientes ‚Üí pedidos, pedidos ‚Üí itens_pedido) e N:M via tabela associativa
Documenta√ß√£o m√≠nima	Nome das tabelas e colunas explicativos