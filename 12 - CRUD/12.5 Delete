ğŸ¯ Objetivo da Aula: DELETE â€“ Apagando Dados com SQL
ğŸ“Œ O que Ã© o DELETE?
O comando DELETE Ã© utilizado para remover linhas (registros) de uma tabela.

ğŸ§  Sintaxe BÃ¡sica
sql
Copy
Edit
DELETE FROM nome_da_tabela
WHERE condiÃ§Ã£o;
Exemplo:
sql
Copy
Edit
DELETE FROM clientes
WHERE id = 5;
ğŸ” Remove o cliente com id = 5.

âš ï¸ CUIDADO: Sem WHERE = Apagar tudo!
sql
Copy
Edit
DELETE FROM clientes;
ğŸ˜± Isso apaga TODOS OS REGISTROS da tabela!

âœ… Boas PrÃ¡ticas com DELETE
âœ”ï¸ Sempre usar WHERE (com critÃ©rios bem definidos)
De preferÃªncia com campos indexados, como id.

âœ”ï¸ Testar com SELECT antes:
sql
Copy
Edit
SELECT * FROM clientes WHERE cidade = 'Dublin';
-- Depois:
DELETE FROM clientes WHERE cidade = 'Dublin';
âœ”ï¸ Fazer backup antes de deletes em massa
âœ”ï¸ Em sistemas reais, usar "delete lÃ³gico" se necessÃ¡rio:
sql
Copy
Edit
UPDATE clientes SET ativo = false WHERE id = 7;
ğŸ”„ Em vez de excluir, vocÃª marca como excluÃ­do.

ğŸ§± Deletando com JOIN
(Dependente do banco: ex. PostgreSQL usa USING)

sql
Copy
Edit
DELETE FROM pedidos
USING clientes
WHERE pedidos.cliente_id = clientes.id
AND clientes.cidade = 'Dublin';
ğŸ” Outras formas de deletar
ğŸ”„ TRUNCATE TABLE (apaga tudo rapidamente)
sql
Copy
Edit
TRUNCATE TABLE nome_da_tabela;
Mais rÃ¡pido que DELETE, mas nÃ£o pode ser filtrado

NÃ£o aciona triggers!

ğŸ§© Deletando registros com subconsultas
sql
Copy
Edit
DELETE FROM pedidos
WHERE cliente_id IN (
  SELECT id FROM clientes WHERE cidade = 'Limerick'
);
ğŸš¨ Cuidados Essenciais
âš ï¸ Nunca rode DELETE sem WHERE sem estar absolutamente certo

ğŸ” Revise permissÃµes â€“ sÃ³ usuÃ¡rios confiÃ¡veis devem poder deletar

ğŸ§ª Prefira testar em ambiente de desenvolvimento antes

ğŸ” Cuidado com chaves estrangeiras (FK) â€“ pode causar erro ou efeito cascata

ğŸ’¡ Use transaÃ§Ãµes (BEGIN, ROLLBACK, COMMIT) em ambientes que suportam

ğŸ’¡ Extras Interessantes
ğŸ“ Apagar sÃ³ se nÃ£o houver relaÃ§Ã£o ativa

DELETE FROM clientes
WHERE id = 10 AND id NOT IN (
  SELECT cliente_id FROM pedidos
);
ğŸ“ TransaÃ§Ãµes (em bancos como PostgreSQL)
sql
Copy
Edit
BEGIN;
DELETE FROM pedidos WHERE id = 50;
ROLLBACK;  -- ou COMMIT;
ğŸ“ ExercÃ­cios sugeridos
Delete o cliente com id = 3

Delete todos os pedidos com valor abaixo de 10

Delete todos os clientes de uma cidade especÃ­fica

FaÃ§a um delete apenas se o cliente nÃ£o tiver pedidos

Use uma subconsulta para deletar com base em outra tabela