üéØ Objetivo da Aula: UPDATE no SQL
üìå O que √© o UPDATE?
O comando UPDATE √© utilizado para modificar registros existentes em uma tabela.

üß† Sintaxe B√°sica
sql
Copy
Edit
UPDATE nome_da_tabela
SET coluna1 = valor1, coluna2 = valor2, ...
WHERE condi√ß√£o;
SET: indica quais colunas ser√£o modificadas e com quais valores.

WHERE: define quais registros ser√£o afetados pela altera√ß√£o.

‚ö†Ô∏è Cuidados ao Usar o UPDATE
1. NUNCA esquecer o WHERE!
Sem WHERE, todos os registros da tabela ser√£o atualizados.

sql
Copy
Edit
-- ERRO comum: sem WHERE
UPDATE clientes
SET telefone = '123456789';

-- Correto
UPDATE clientes
SET telefone = '123456789'
WHERE id = 42;
2. Fa√ßa um SELECT antes
Sempre visualize os dados que pretende alterar:

sql
Copy
Edit
SELECT * FROM clientes WHERE id = 42;
3. Use transa√ß√µes (quando dispon√≠vel)
Para evitar altera√ß√µes acidentais em sistemas cr√≠ticos:

sql
Copy
Edit
BEGIN;

UPDATE contas
SET saldo = saldo - 100
WHERE id = 1;

-- S√≥ confirma se tudo estiver certo
COMMIT;

-- Se algo deu errado
ROLLBACK;
‚úÖ Boas Pr√°ticas
‚úîÔ∏è Use UPDATE com WHERE + AND, IN, BETWEEN, etc.
sql
Copy
Edit
-- Atualizar clientes de uma cidade espec√≠fica
UPDATE clientes
SET status = 'ativo'
WHERE cidade = 'Dublin' AND status = 'inativo';
‚úîÔ∏è Atualize m√∫ltiplas colunas de forma clara
sql
Copy
Edit
UPDATE produtos
SET preco = preco * 1.10,
    atualizado_em = NOW()
WHERE categoria = 'eletr√¥nicos';
‚úîÔ∏è Mantenha logs ou hist√≥rico de altera√ß√µes
Uma boa pr√°tica √© ter uma tabela de hist√≥rico ou usar triggers para registrar altera√ß√µes.

‚úîÔ∏è Teste em ambiente de desenvolvimento ou com uma c√≥pia da tabela
Exemplo:

sql
Copy
Edit
CREATE TABLE teste AS SELECT * FROM clientes;

-- Teste na tabela "teste" antes de aplicar na original
UPDATE teste SET nome = 'Teste' WHERE id = 1;
üí° Extras Interessantes para Incluir
üìç RETURNING (PostgreSQL)
Permite ver os dados alterados imediatamente ap√≥s o UPDATE.

sql
Copy
Edit
UPDATE clientes
SET email = 'novo@email.com'
WHERE id = 10
RETURNING *;
üìç Atualizar com base em outra tabela
sql
Copy
Edit
UPDATE funcionarios f
SET salario = a.novo_salario
FROM ajustes_salarial a
WHERE f.id = a.funcionario_id;
üìç Subconsultas no SET
sql
Copy
Edit
UPDATE produtos
SET preco = (
    SELECT AVG(preco)
    FROM produtos
    WHERE categoria = 'tecnologia'
)
WHERE categoria = 'tecnologia';
üìù Exerc√≠cios sugeridos
Atualize o telefone de um cliente espec√≠fico.

Aumente em 5% o pre√ßo de todos os produtos da categoria "comida".

Corrija um campo de e-mail com erro de digita√ß√£o.

Atualize uma coluna com data e hora atual (NOW()).

Teste o RETURNING para ver quais linhas foram modificadas.