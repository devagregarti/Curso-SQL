‚úÖ Valida√ß√µes Comuns com Express√µes Regulares em SQL
Agora que voc√™ j√° sabe o que √© regex, vamos aplicar isso em valida√ß√µes do dia a dia ‚Äî como verificar se um e-mail est√° no formato correto, ou se um CPF tem 11 d√≠gitos.

Esses exemplos v√£o ajudar a mostrar como express√µes regulares s√£o ferramentas poderosas para garantir a qualidade dos dados.

üìß 1. Valida√ß√£o de E-mail
Um padr√£o b√°sico para validar e-mails pode ser:

sql
Copy
Edit
SELECT * FROM clientes
WHERE email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$';
Come√ßa com letras, n√∫meros ou s√≠mbolos permitidos (. _ % + -)

Tem um @

Depois vem o dom√≠nio

E termina com uma extens√£o como .com, .br, .org, etc.

üîç Obs: validar e-mails com regex 100% perfeita √© dif√≠cil. Esse padr√£o cobre a maioria dos casos reais.

üì± 2. Valida√ß√£o de N√∫mero de Telefone (Ex: Brasil + DDD)
Formato: +55 seguido de 2 d√≠gitos (DDD) e 9 d√≠gitos (n√∫mero)

sql
Copy
Edit
SELECT * FROM clientes
WHERE telefone ~ '^\+55\d{2}9\d{8}$';
Exemplo v√°lido: +5511987654321

üÜî 3. Valida√ß√£o de CPF (somente n√∫meros)
CPF com 11 d√≠gitos:

sql
Copy
Edit
SELECT * FROM clientes
WHERE cpf ~ '^\d{11}$';
Se quiser aceitar com pontos e tra√ßo (123.456.789-09), use:

sql
Copy
Edit
SELECT * FROM clientes
WHERE cpf ~ '^\d{3}\.\d{3}\.\d{3}-\d{2}$';
üÜé 4. Placa de carro brasileira (modelo antigo: ABC-1234)
sql
Copy
Edit
SELECT * FROM veiculos
WHERE placa ~ '^[A-Z]{3}-\d{4}$';
üåç 5. CEP (C√≥digo Postal brasileiro)
sql
Copy
Edit
SELECT * FROM enderecos
WHERE cep ~ '^\d{5}-\d{3}$';
Exemplo v√°lido: 12345-678

üî† 6. Nomes com apenas letras (sem n√∫meros ou s√≠mbolos)
sql
Copy
Edit
SELECT * FROM clientes
WHERE nome ~ '^[A-Za-z√Ä-√ø\s]+$';
Inclui letras acentuadas e espa√ßos.

üß™ 7. Somente n√∫meros
√ötil para campos que devem conter apenas n√∫meros (como ID, c√≥digo etc.):

sql
Copy
Edit
SELECT * FROM produtos
WHERE codigo ~ '^\d+$';
üí° Dica para os alunos:
Regex n√£o impede que dados errados entrem no banco se usado apenas em SELECT.
Mas voc√™ pode us√°-lo em CHECK constraints para validar dados na cria√ß√£o de tabelas, por exemplo:

sql
Copy
Edit
CREATE TABLE usuarios (
  email TEXT CHECK (email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$')
);
